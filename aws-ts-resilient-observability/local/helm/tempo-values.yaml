# Tempo configuration for local development
# Using the unified tempo chart (replaces deprecated tempo-distributed)

tempo:
  storage:
    trace:
      backend: local
      local:
        path: /var/tempo/traces
  retention: 48h
  reportingEnabled: false
  metricsGenerator:
    enabled: true
    remoteWriteUrl: "http://mimir-distributor.mimir.svc.cluster.local:8080/api/v1/push"
    processor:
      service_graphs:
        enabled: true
      span_metrics:
        enabled: true

# Persistence
persistence:
  enabled: true
  size: 10Gi
  storageClassName: standard

# Resources for local dev
resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi

# Service configuration
service:
  type: ClusterIP

# Enable trace search
search:
  enabled: true

# Receivers - what protocols to accept
receivers:
  otlp:
    protocols:
      grpc:
        endpoint: "0.0.0.0:4317"
      http:
        endpoint: "0.0.0.0:4318"
  jaeger:
    protocols:
      thrift_http:
        endpoint: "0.0.0.0:14268"
      grpc:
        endpoint: "0.0.0.0:14250"
  zipkin:
    endpoint: "0.0.0.0:9411"

# Service monitors (disabled for local)
serviceMonitor:
  enabled: false

prometheusRule:
  enabled: false
